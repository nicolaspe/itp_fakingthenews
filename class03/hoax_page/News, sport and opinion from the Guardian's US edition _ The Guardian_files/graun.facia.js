webpackJsonp([6],{216:function(e,t,n){(function(e){var a,o;a=[n(133)],void 0!==(o=function(e){function t(t){return!1!==e.get(n+"."+t)}var n="accessibility";return{KEY_PREFIX:n,saveState:function(t){for(var a in t)t.hasOwnProperty(a)&&e.set(n+"."+a,t[a])},isOn:function(e){return!0===t(e)}}}.apply(t,a))&&(e.exports=o)}).call(t,n(217)(e))},217:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},345:function(e,t,n){var a,o;a=[n(50),n(134),n(27)],void 0!==(o=function(e,t,n){return function(a){return function(o,i,r){var s={};if(i=t(i,r,3),n(o))for(var u=-1,l=o.length;++u<l;){var d=o[u];a(s,d,i(d,u,o),o)}else e(o,function(e,t,n){a(s,e,i(e,t,n),n)});return s}}}.apply(t,a))&&(e.exports=o)},425:function(e,t,n){var a,o;a=[n(19),n(10),n(31),n(424),n(36)],void 0!==(o=function(e,t,n,a,o){function i(e,n){var a={conditionFn:e,loadFn:n};s.push(a),1===s.length&&t.on("window:throttledScroll",l),r()}var r,s=[],u={top:0,bottom:0},l=function(){u.top=window.pageYOffset,u.bottom=u.top+e.viewport().height,0===(s=a(s,function(e){if(!e.conditionFn())return!0;e.loadFn()})).length&&t.off("window:throttledScroll",l)};return r=o(l,2e3),{add:function(t,a,o){n.read(function(){var n=e(t);i(function(){var e=n.offset(),t=e.top-a,o=e.top+e.height+a;return u.top>t&&u.bottom<o},o)})}}}.apply(t,a))&&(e.exports=o)},463:function(e,t,n){var a,o;a=[t,n(31),n(216)],void 0!==(o=function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldHideFlashingElements=void 0;var o=a(t),i=a(n);e.shouldHideFlashingElements=function(e){i.default.isOn("flashing-elements")?e&&e():o.default.write(function(){document.body&&document.body.classList.add("disable-flashing-elements"),e&&e()})}}.apply(t,a))&&(e.exports=o)},674:function(e,t,n){var a,o;a=[n(19),n(43),n(42),n(0),n(15),n(10),n(215),n(20),n(237),n(463),n(509),n(675),n(678),n(679),n(680),n(683),n(684),n(687),n(689),n(691),n(693)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l,d,c,f,h,p,v,g,m,w,y,_){var b={showSnaps:function(){m.init(),i.on("modules:container:rendered",m.init)},showContainerShowMore:function(){i.addListeners({"modules:container:rendered":p.init,"page:front:ready":p.init})},showContainerToggle:function(){var e=function(e){n(".js-container--toggle",n(e||document)[0]).each(function(e){new h.ContainerToggle(e).addToggle()})};i.addListeners({"page:front:ready":e,"modules:geomostpopular:ready":_(e,".js-popular-trails")})},upgradeMostPopularToGeo:function(){a.switches.geoMostPopular&&(new f.GeoMostPopularFront).go()},showWeather:function(){a.switches.weather&&i.on("page:front:ready",function(){y.Weather.init()})},showLiveblogUpdates:function(){o.isBreakpoint({min:"desktop"})&&i.on("page:front:ready",function(){g.showUpdatesFromLiveBlog()})},finished:function(){i.emit("page:front:ready")}};return{init:function(){r.catchErrorsWithContext([["f-accessibility",l.shouldHideFlashingElements],["f-snaps",b.showSnaps],["f-show-more",b.showContainerShowMore],["f-container-toggle",b.showContainerToggle],["f-geo-most-popular",b.upgradeMostPopularToGeo],["f-lazy-load-containers",v.lazyLoadContainers],["f-stocks",c],["f-sponsorship",w],["f-weather",b.showWeather],["f-live-blog-updates",b.showLiveblogUpdates],["f-finished",b.finished]])}}}.apply(t,a))&&(e.exports=o)},675:function(e,t,n){var a,o;a=[e,t,n(42),n(0),n(26),n(90),n(49),n(214),n(676),n(677)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=d(n),f=d(a),h=d(o),p=d(i),v=d(r),g=d(u),m=d(l),w=function(){return-1!==["uk/business","us/business","au/business"].indexOf(f.default.page.pageId)},y=function(){return(0,h.default)("/business-data/stocks.json",{mode:"cors"}).catch(function(e){(0,p.default)(e,{feature:"stocks"})})},_=function(e){return e>0?"+"+e:""+e},b=function(e){var t=e.stocks.map(function(e){return(0,v.default)(g.default,{name:e.name,deltaClass:"stocks__stock-value--"+e.trend,price:e.price,change:_(e.change),closed:e.closed?'<div class="stocks__closed">closed</div>':"",closedInline:e.closed?'<div class="stocks__closed--inline">closed</div>':"",marketDownIcon:(0,s.inlineSvg)("marketDownIcon",["stocks__icon","stocks__icon--down"]),marketUpIcon:(0,s.inlineSvg)("marketUpIcon",["stocks__icon","stocks__icon--up"]),marketSameIcon:(0,s.inlineSvg)("marketSameIcon",["stocks__icon","stocks__icon--same"])})}).join("");return(0,v.default)(m.default,{stocks:t})};t.default=function(){var e=(0,c.default)(".js-container--first .js-container__header");w()&&e&&y().then(function(t){t&&t.stocks&&t.stocks.length>0&&e.append(b(t))})},e.exports=t.default}.apply(t,a))&&(e.exports=o)},676:function(e,t){e.exports='<div class="stocks__stock-value <%=deltaClass%>">\n    <div class="stocks__divider"></div>\n    <div class="stocks__name"><%=name%><%=closedInline%></div>\n    <div class="stocks__value">\n        <div class="stocks__price"><%=price%></div>\n        <%=marketDownIcon%>\n        <%=marketUpIcon%>\n        <%=marketSameIcon%>\n        <div class="stocks__change"><%=change%></div>\n    </div>\n    <%=closed%>\n</div>\n'},677:function(e,t){e.exports='<div class="stocks__stocks-container">\n    <%=stocks%>\n</div>\n'},678:function(e,t,n){var a,o;a=[t,n(17),n(23),n(91),n(92),n(43),n(42),n(0),n(10),n(404),n(44)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l,d){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoMostPopularFront=void 0;var f=c(t),h=c(n),p=c(a),v=c(o),g=c(i),m=c(r),w=c(s),y=c(u),_=c(l),b=c(d),k=function(e){(0,m.default)(".js-tabs-content",e).addClass("tabs__content--no-border"),(0,m.default)(".js-tabs",e).addClass("u-h")};e.GeoMostPopularFront=function(e){function t(){(0,f.default)(this,t);var e=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return _.default.begin("most-popular"),e.endpoint="/most-read-geo.json",e.isNetworkFront="Network Front"===w.default.page.contentType,e.isVideoFront="video"===w.default.page.pageId,e.isInternational="international"===w.default.page.pageId,e.manipulationType="html",e}return(0,v.default)(t,e),(0,h.default)(t,[{key:"prerender",value:function(){this.elem=(0,g.default)(".headline-list",this.elem)[0]}},{key:"go",value:function(){var e=this.isNetworkFront?".js-tab-1":".js-tab-2";this.parent=(0,g.default)(".js-popular-trails")[0],this.parent&&(this.isInternational&&this.isNetworkFront||this.isVideoFront?k(this.parent):(this.tab=(0,g.default)(e,this.parent)[0],this.fetch(this.tab,"html")))}},{key:"ready",value:function(){this.isNetworkFront&&k(this.parent),_.default.end("most-popular"),y.default.emit("modules:geomostpopular:ready")}}]),t}(b.default)}.apply(t,a))&&(e.exports=o)},679:function(e,t,n){var a,o;a=[t,n(17),n(23),n(19),n(31),n(42),n(10),n(133),n(214)],void 0!==(o=function(e,t,n,a,o,i,r,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerToggle=void 0;var d=l(t),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m="container-states",w={hidden:"Show",displayed:"Hide"},y=function(e){var t=e.text;return'\n    <button class="fc-container__toggle" data-link-name="'+e.dataLink+'">\n        '+e.icon+'\n        <span class="fc-container__toggle__text">'+t+"</span>\n    </button>\n"};e.ContainerToggle=function(){function e(t){(0,d.default)(this,e),this.$container=(0,f.default)(t),this.$button=(0,f.default)(f.default.create(y({text:"Hide",dataLink:"Show",icon:(0,u.inlineSvg)("arrowicon")}))),this.state="displayed"}return(0,c.default)(e,[{key:"buttonText",value:function(){return(0,p.default)(".fc-container__toggle__text",this.$button)}},{key:"updatePref",value:function(e){var t=g.default.get(m),n=e;"displayed"===this.state?delete t[n]:(t||(t={}),t[n]="closed"),g.default.set(m,t)}},{key:"setState",value:function(e){var t=this;this.state=e,h.default.write(function(){t.$container["displayed"===t.state?"removeClass":"addClass"]("fc-container--rolled-up"),t.$button.attr("data-link-name",w["displayed"===t.state?"hidden":"displayed"]),t.buttonText().text(w[t.state])})}},{key:"readPrefs",value:function(e){var t=g.default.get(m);t&&t[e]&&this.setState("hidden")}},{key:"addToggle",value:function(){var e=this,t=this.$container.attr("data-id"),n=(0,p.default)(".js-container__header",this.$container[0]);h.default.write(function(){n.append(e.$button),e.$container.removeClass("js-container--toggle").removeClass("fc-container--will-have-toggle").addClass("fc-container--has-toggle"),e.readPrefs(t)}),v.default.on("module:clickstream:click",function(n){n.target===e.$button[0]&&(e.setState("displayed"===e.state?"hidden":"displayed"),e.updatePref(t))})}}]),e}()}.apply(t,a))&&(e.exports=o)},680:function(e,t,n){var a,o;a=[t,n(17),n(23),n(19),n(31),n(43),n(42),n(0),n(26),n(10),n(90),n(681),n(133),n(682)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l,d,c,f,h){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e._=e.init=void 0;var v=p(t),g=p(n),m=p(a),w=p(o),y=p(i),_=p(r),b=p(s),k=p(u),j=p(l),C=p(d),x=p(c),M=p(f),S=p(h),$="js-button-text",L=Object.freeze({displayed:"displayed",loading:"loading",hidden:"hidden"}),F=function(e){var t=M.default.get("section-states",{type:"session"});return t&&t[e]?L.displayed:L.hidden},D=function(e,t){var n=M.default.get("section-states",{type:"session"})||{};t!==L.displayed?delete n[e]:n[e]="more",M.default.set("section-states",n,{type:"session"})},E=function(e,t){var n="/"+e+"/show-more/"+t+".json";return(0,x.default)(5e3,(0,k.default)(n,{mode:"cors"}))},T=function(e){return(0,S.default)((0,y.default)(".js-fc-item",e),function(e){return(0,m.default)(e).attr("data-id")})},I=function(e,t){var n=T(e),a=m.default.create(t);return(0,_.default)(".js-fc-item",a).each(function(e){var t=(0,m.default)(e);t.attr("data-id")in n&&t.remove()}),a},P=function(){function e(t,n){(0,v.default)(this,e),this.id=n.attr("data-id"),this.state=F(this.id),this.$el=t,this.$container=n,this.isLoaded=!1,this.$iconEl=(0,_.default)(".i",this.$el),this.$placeholder=(0,_.default)(".js-show-more-placeholder",this.$container),this.$textEl=(0,_.default)("."+$,this.$el),this.state===L.displayed&&this.loadShowMoreForContainer(),this.messages=new Map([[L.hidden,(0,_.default)(".js-button-text",this.$el).text()],[L.displayed,"Less"],[L.loading,"Loading&hellip;"]])}return(0,g.default)(e,[{key:"setState",value:function(e){this.$textEl.html(this.messages.get(e)),this.$el.attr("data-link-name",e===L.displayed?"less":"more").toggleClass("button--primary",e!==L.displayed).toggleClass("button--tertiary",e===L.displayed).toggleClass("collection__show-more--loading",e===L.loading),this.$container.toggleClass("fc-show-more--hidden",e!==L.displayed).toggleClass("fc-show-more--visible",e===L.displayed),this.state=e}},{key:"loadShowMoreForContainer",value:function(){var e=this;w.default.write(function(){e.setState(L.loading)}),E(b.default.page.pageId,this.id).then(function(t){var n=void 0,a=t.html.trim();a&&(n=I(e.$container,a)),w.default.write(function(){n&&e.$placeholder.replaceWith(n),e.setState(L.displayed),D(e.id,e.state),j.default.emit("modules:show-more:loaded")}),e.isLoaded=!0}).catch(function(t){w.default.write(function(){e.setState(L.hidden)}),e.showErrorMessage(),(0,C.default)(t,{feature:"container-show-more"},!1)})}},{key:"hideErrorMessage",value:function(){var e=this;w.default.write(function(){null!=e.$errorMessage&&e.$errorMessage.addClass("show-more__error-message--invisible")})}},{key:"showErrorMessage",value:function(){var e=this;this.$errorMessage&&this.$errorMessage.remove(),this.$errorMessage=(0,m.default)(m.default.create('<div class="show-more__error-message">Sorry, failed to load more stories. Please try again.</div>')),w.default.write(function(){null!=e.$errorMessage&&(e.$errorMessage.insertAfter(e.$el),setTimeout(function(){e.hideErrorMessage()},5e3))})}}]),e}(),O=function(e){w.default.write(function(){e.setState(e.state===L.hidden?L.displayed:L.hidden),D(e.id,e.state)})},N=function(e){w.default.write(function(){e.$container.addClass("fc-show-more--hidden").removeClass("js-container--fc-show-more").toggleClass("fc-show-more--hidden",e.state===L.hidden),e.setState(e.state)})};e.init=function(){w.default.read(function(){var e=(0,y.default)(".js-container--fc-show-more").map(m.default).map(function(e){var t=(0,_.default)(".js-show-more-button",e);return t?new P(t,e):null}).filter(function(e){return null!=e});e.forEach(N),j.default.on("module:clickstream:click",function(t){var n=e.find(function(e){return e.$el[0]===t.target});n&&n.state!==L.loading&&(n.isLoaded?O(n):(n.$errorMessage&&n.$errorMessage.hide(),n.loadShowMoreForContainer()))})})},e._={itemsByArticleId:T,dedupShowMore:I}}.apply(t,a))&&(e.exports=o)},681:function(e,t,n){var a,o;a=[e,t],void 0!==(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return Promise.race([t,new Promise(function(t,n){setTimeout(function(){return n(new Error("Timeout"))},e)})])},e.exports=t.default}.apply(t,a))&&(e.exports=o)},682:function(e,t,n){var a,o;a=[n(345)],void 0!==(o=function(e){var t=Object.prototype.hasOwnProperty;return e(function(e,n,a){(t.call(e,a)?e[a]:e[a]=[]).push(n)})}.apply(t,a))&&(e.exports=o)},683:function(e,t,n){var a,o;a=[t,n(31),n(43),n(15),n(10),n(225)],void 0!==(o=function(e,t,n,a,o,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.lazyLoadContainers=void 0;var s=r(t),u=r(n),l=r(o),d=r(i),c=(0,a.getViewport)().height,f=function(e){var t=e.nextElementSibling,n=t?t.getBoundingClientRect().top:0;return-c<n&&n<2*c},h=function(e){e.classList.remove("fc-container--lazy-load")};e.lazyLoadContainers=function(){var e=(0,u.default)(".js-container--lazy-load"),t=(0,d.default)(function(){0===e.length?l.default.off("window:throttledScroll",t):s.default.read(function(){var t=e.reduce(function(e,t){return e[f(t)?"in":"out"].push(t),e},{in:[],out:[]});e=t.out,s.default.write(function(){t.in.forEach(h)})})},500);l.default.on("window:throttledScroll",t),t()}}.apply(t,a))&&(e.exports=o)},684:function(e,t,n){var a,o;a=[t,n(19),n(405),n(42),n(15),n(76),n(26),n(10),n(20),n(49),n(685),n(686),n(36)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l,d,c,f){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.showUpdatesFromLiveBlog=void 0;var p=h(t),v=h(n),g=h(a),m=h(i),w=h(r),y=h(s),_=h(l),b=h(d),k=h(c),j=h(f),C=30,x=5,M=(0,o.getViewport)().height,S=function(e){var t=(e||{}).publishedDateTime;return!!t&&v.default.makeRelativeDate(new Date(t))||""},$=function(e,t,n){var a=S(t);return a=a.match(/yesterday/i)?a.toLowerCase():a?"Latest update "+a+" ago":"Updated just now",(0,_.default)(b.default,{ariaHidden:!t.isNew,href:"/"+e+"#"+t.id,relativeTime:a,text:[t.title,t.body.slice(0,500)].filter(function(e){return null!=e}).join(". "),index:n+1})},L=function(e,t){return m.default.read(function(){return e.getBoundingClientRect().top}).then(function(n){return n>0&&n<M&&(setTimeout(function(){var t=(0,p.default)(e);m.default.write(function(){t.removeClass("fc-item__liveblog-blocks__inner--offset")})},t?0:2e3),!0)})},F=function(e){L(e).then(function(t){var n=void 0;t||(n=(0,j.default)(function(){L(e,!0).then(function(e){e&&y.default.off("window:throttledScroll",n)})},500),y.default.on("window:throttledScroll",n))})},D=function(e,t,n,a){var o=(0,k.default)(a);t.forEach(function(t){var i=!1,r=["fc-item__liveblog-blocks__inner","u-faux-block-link__promote"],s=n.slice(0,2).map(function(t,n){return!i&&(t.publishedDateTime>a||o)&&(t.isNew=!0,i=!0,r.push("fc-item__liveblog-blocks__inner--offset")),$(e,t,n)}).slice(0,i?2:1),u=p.default.create('<div class="'+r.join(" ")+'">'+s.join("")+"</div>"),l=(0,p.default)(t);m.default.write(function(){l.empty().append(u)}).then(function(){i&&F(u[0])})})},E=function(e){return e.filter(function(e){return e.id&&e.publishedDateTime&&e.body&&e.body.length>=10})};e.showUpdatesFromLiveBlog=function e(){return m.default.read(function(){var e=new Map;return(0,g.default)(".js-liveblog-blocks").each(function(t){var n=t.getAttribute("data-article-id");if(n){var a=e.get(n)||[];a.push(t),e.set(n,a)}}),e}).then(function(t){var n=void 0;t.size&&(n=u.session.get("gu.liveblog.block-dates")||{},t.forEach(function(e,t){(0,w.default)("/"+t+".json?rendered=false",{mode:"cors"}).then(function(a){var o=a&&E(a.blocks);o&&o.length&&(D(t,e,o,n[t]),n[t]=o[0].publishedDateTime,u.session.set("gu.liveblog.block-dates",n))}).catch(function(){})}),x&&(x-=1,setTimeout(function(){e()},1e3*C),C*=1))})}}.apply(t,a))&&(e.exports=o)},685:function(e,t){e.exports='<a href="<%=href%>" class="fc-item__liveblog-block" data-link-name="block | <%=index%>" aria-hidden="<%=ariaHidden%>">\n    <div class="fc-item__liveblog-block__text">\n        <div class="fc-item__liveblog-block__time"><%=relativeTime%></div>\n        <%=text%>\n    </div>\n</a>\n'},686:function(e,t,n){var a,o;a=[],void 0!==(o=function(){return function(e){return void 0===e}}.apply(t,a))&&(e.exports=o)},687:function(e,t,n){var a,o;a=[n(48),n(19),n(31),n(42),n(15),n(52),n(10),n(49),n(237),n(425),n(90),n(405),n(688),n(219),n(462)],void 0!==(o=function(e,t,n,a,o,i,r,s,u,l,d,c,f,h,p){function v(e,t){g(e,t),a(e).hasClass("facia-snap--football")&&f.resizeForFootballSnaps(e)}function g(e,a){var o,i,r=t(e);i=[{width:0,name:"tiny"},{width:180,name:"mini"},{width:220,name:"small"},{width:300,name:"medium"},{width:700,name:"large"},{width:940,name:"huge"}],n.read(function(){o=e.offsetWidth}),n.write(function(){i.map(function(e,t,n){var i=o>=e.width&&(!n[t+1]||o<n[t+1].width);return e.action=i?"addClass":!!a&&"removeClass",e}).filter(function(e){return e.action}).forEach(function(e){r[e.action]("facia-snap-point--"+e.name)})})}function m(e){var a=t(e).offset(),o=Math.ceil((a.width||0)/2),i=e.getAttribute("data-snap-uri"),r=Math.min(Math.max(a.height||0,o),400),s=t.create('<div style="width: 100%; height: '+r+'px; overflow: hidden; -webkit-overflow-scrolling:touch"></div>')[0],u=t.create('<iframe src="'+i+'" style="width: 100%; height: 100%; border: none;"></iframe>')[0];t(s).append(u),k.push(u),j(),n.write(function(){t(e).empty().append(s)})}function w(e,o){i(e.getAttribute("data-snap-uri"),{mode:"cors"}).then(function(e){return e.ok?o?e.json().then(function(e){return e.html}):e.text():Promise.reject(new Error("Fetch error: "+e.statusText))}).then(function(o){a.create(o).each(function(a){n.write(function(){t(e).html(a)})}),c.init(e)}).catch(function(e){d(e,{feature:"snaps"})})}function y(e){l.add(e,1500,function(){switch(n.write(function(){t(e).addClass("facia-snap-embed")}),v(e),e.getAttribute("data-snap-type")){case"document":m(e);break;case"fragment":w(e);break;case"json.html":w(e,!0)}o.isIOS||r.on("window:throttledResize",function(){v(e,!0)})})}function _(e){v(e),o.isIOS||r.on("window:throttledResize",function(){v(e,!0)})}var b=["document","fragment","json.html"],k=[],j=h(function(){e.on(window,"message",function(e){var n,a=p(k,function(t){return t.contentWindow===e.source});a&&"set-height"===(n=JSON.parse(e.data)).type&&t(a).parent().css("height",n.value)})});return{init:function(){u(a(".facia-snap-embed")).forEach(_),u(a(".js-snappable.js-snap")).filter(function(e){var t=a(e).hasClass("facia-snap-embed"),n=e.getAttribute("data-snap-type");return!t&&n&&b.indexOf(n)>-1}).filter(function(e){return e.getAttribute("data-snap-uri")}).forEach(y)}}}.apply(t,a))&&(e.exports=o)},688:function(e,t,n){var a,o;a=[t,n(19),n(15)],void 0!==(o=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resizeForFootballSnaps=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(t);e.resizeForFootballSnaps=function(e){if(e&&"mobile"!==(0,n.getBreakpoint)()){var t=(0,a.default)(e);t.css("height",t.parent().css("height"))}}}.apply(t,a))&&(e.exports=o)},689:function(e,t,n){var a,o;a=[n(48),n(19),n(31),n(43),n(221),n(690)],void 0!==(o=function(e,t,n,a,o,i){function r(){return new Promise(function(t){var n=function(a){d.push(a.keyCode),i(c.slice(0,d.length),d)?d.length===c.length&&(t(),e.off(document,"keydown",n)):d=[]};e.on(document,"keydown",n)})}function s(e,t){return Math.floor(Math.random()*(t-e+1))+e}function u(){return f[s(0,f.length-1)]}function l(){var e=o(a(".js-fc-item"),t);setInterval(function(){n.write(function(){e.forEach(function(e){f.forEach(function(t){e.removeClass(t)}),e.addClass(u())})})},1e3)}var d=[],c=[38,38,40,40,37,39,37,39,66,65],f=o(["special-report","live","dead","feature","editorial","comment","podcast","media","analysis","review","letters","external","news"],function(e){return"tone-"+e+"--item"});return function(){r().then(l)}}.apply(t,a))&&(e.exports=o)},690:function(e,t,n){var a,o;a=[n(39),n(244)],void 0!==(o=function(e,t){return function(n,a,o,i){return t(n,a,"function"==typeof o&&e(o,i,2))}}.apply(t,a))&&(e.exports=o)},691:function(e,t,n){var a,o;a=[t,n(48),n(90),n(42),n(0),n(26),n(10),n(133),n(692)],void 0!==(o=function(e,t,n,a,o,i,r,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e._=e.Weather=void 0;var d=l(t),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m=null,w=null,y=!1,_="weather-location",b=function(){return["uk","us","au","international"].includes(h.default.page.pageId)};e.Weather={init:function(){if(!h.default.switches||!h.default.switches.weather||!b())return!1;this.getDefaultLocation()},getUserLocation:function(){var e=g.default.get(_);if(e&&e.id)return e},getWeatherData:function(e){return(0,p.default)(e,{mode:"cors"})},saveUserLocation:function(e){g.default.set(_,{id:e.id,city:e.city})},getDefaultLocation:function(){var e=this,t=this.getUserLocation();return t?this.fetchWeatherData(t):this.getWeatherData(h.default.page.weatherapiurl+".json").then(function(t){e.fetchWeatherData(t)}).catch(function(e){(0,c.default)(e,{feature:"weather"})})},fetchWeatherData:function(e){var t=this,n=h.default.page.weatherapiurl,a=h.default.page.edition;return this.getWeatherData(n+"/"+e.id+".json?_edition="+a.toLowerCase()).then(function(n){t.render(n,e.city),t.fetchForecastData(e)}).catch(function(e){(0,c.default)(e,{feature:"weather"})})},clearLocation:function(){g.default.remove(_),null!==w&&w.setInputValue()},fetchForecastData:function(e){var t=this;return this.getWeatherData(h.default.page.forecastsapiurl+"/"+e.id+".json?_edition="+h.default.page.edition.toLowerCase()).then(function(e){t.renderForecast(e)}).catch(function(e){(0,c.default)(e,{feature:"weather"})})},saveDeleteLocalStorage:function(e){var t=this;"set"===e.store?(this.saveUserLocation(e),this.fetchWeatherData(e).then(function(){return t.toggleForecast()})):"remove"===e.store&&(this.clearLocation(),this.getDefaultLocation())},bindEvents:function(){var e=this;d.default.on(document.body,"click",".js-toggle-forecast",function(t){t.preventDefault(),e.toggleForecast()}),v.default.on("autocomplete:fetch",this.saveDeleteLocalStorage.bind(this))},toggleForecast:function(){(0,f.default)(".weather").toggleClass("is-expanded")},addSearch:function(){w=new u.SearchTool({container:(0,f.default)(".js-search-tool"),apiUrl:h.default.page.locationapiurl})},render:function(e,t){this.attachToDOM(e.html,t),y||(this.bindEvents(),y=!0),null===w?this.addSearch():w.bindElements((0,f.default)(".js-search-tool"))},attachToDOM:function(e,t){m=(0,f.default)("#headlines .js-container__header"),(0,f.default)(".js-weather",m).remove(),m.append(e.replace(new RegExp("<%=city%>","g"),t))},renderForecast:function(e){var t=(0,f.default)(".js-weather-forecast"),n=e.html;t.empty().html(n)}},e._={isNetworkFront:b}}.apply(t,a))&&(e.exports=o)},692:function(e,t,n){var a,o;a=[t,n(17),n(23),n(48),n(42),n(26),n(10),n(90),n(19)],void 0!==(o=function(e,t,n,a,o,i,r,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.SearchTool=void 0;var d=l(t),c=l(n),f=l(a),h=l(o),p=l(i),v=l(r),g=l(s),m=(l(u),{13:"enter",38:"up",40:"down",27:"escape"});e.SearchTool=function(){function e(t){(0,d.default)(this,e);var n=t.container;this.apiUrl=t.apiUrl,this.bindElements(n),this.bindEvents(),this.oldQuery="",this.newQuery="",this.inputTmp=""}return(0,c.default)(e,[{key:"bindElements",value:function(e){this.$list=(0,h.default)(".js-search-tool-list",e),this.$input=(0,h.default)(".js-search-tool-input",e)}},{key:"bindEvents",value:function(){f.default.on(document.body,"keyup",this.handleKeyEvents.bind(this)),f.default.on(document.body,"click",this.handleClick.bind(this)),v.default.on("autocomplete:toggle",this.toggleControls.bind(this))}},{key:"hasInputValueChanged",value:function(){return this.oldQuery.length!==this.newQuery.length}},{key:"handleClick",value:function(t){var n=(0,h.default)(t.target).hasClass("js-search-tool-input"),a=e.nearestLinkNode(t.target);n?(t.preventDefault(),v.default.emit("autocomplete:toggle",!0)):a?(t.preventDefault(),(0,h.default)(".active",this.$list).removeClass("active"),(0,h.default)(a).addClass("active"),this.pushData()):v.default.emit("autocomplete:toggle",!1)}},{key:"toggleControls",value:function(e){var t=(0,h.default)(".js-search-tool-input")[0],n=(0,h.default)(".js-search-tool"),a=(0,h.default)(".js-close-location"),o=(0,h.default)(".js-edit-location");e?(this.inputTmp=t.value,n.addClass("is-editing"),t.setSelectionRange(0,t.value.length),a.removeClass("u-h"),o.addClass("u-h")):(n.removeClass("is-editing"),this.clear(),this.setInputValue(this.inputTmp),a.addClass("u-h"),o.removeClass("u-h"))}},{key:"pushData",value:function(){var e=(0,h.default)(".active",this.$list),t="set";if(0===e.length){if(""!==this.$input.val())return;t="remove"}var n={id:e.attr("data-weather-id"),city:e.attr("data-weather-city"),store:t};v.default.emit("autocomplete:fetch",n),this.setInputValue(),this.inputTmp=n.city,this.$input.blur(),setTimeout(this.destroy.bind(this),50)}},{key:"getListOfResults",value:function(e){if(this.newQuery=e.target.value,!e.target.value.match(/\S/))return this.clear(),void(this.oldQuery="");this.hasInputValueChanged()&&this.fetchData()}},{key:"fetchData",value:function(){var e=this;return(0,p.default)(""+this.apiUrl+this.newQuery,{mode:"cors"}).then(function(t){e.renderList(t,5),e.oldQuery=e.newQuery}).catch(function(e){(0,g.default)(e,{feature:"search-tool"})})}},{key:"handleKeyEvents",value:function(e){var t=m[e.which||e.keyCode];(0,h.default)(e.target).hasClass("js-search-tool-input")&&("down"===t?(e.preventDefault(),this.move(1)):"up"===t?(e.preventDefault(),this.move(-1)):"enter"===t?this.pushData():"escape"===t?this.toggleControls():this.getListOfResults(e))}},{key:"move",value:function(e){var t=(0,h.default)(".active",this.$list),n=parseInt(t.attr("id"),10);isNaN(n)&&(n=-1),t.removeClass("active"),this.getNewId(n+e)<0?this.setInputValue(this.oldQuery):((0,h.default)("#"+this.getNewId(n+e)+"sti",this.$list).addClass("active"),this.setInputValue())}},{key:"getNewId",value:function(e){var t=(0,h.default)("li",this.$list).length,n=e%t;return n<-1?n=t-1:e===t&&(n=-1),n}},{key:"setInputValue",value:function(e){var t=e||(0,h.default)(".active",this.$list).attr("data-weather-city");this.$input.val(t)}},{key:"renderList",value:function(e,t){var n=document.createDocumentFragment(),a=e.length-t;e.slice(0,a).forEach(function(e,t){var a=document.createElement("li");a.className="search-tool__item",a.innerHTML='<a role="button" href="#'+e.id+'" id="'+t+'sti" class="js-search-tool-link search-tool__link'+(0===t?' active"':'"')+' data-link-name="weather-search-tool" data-weather-id="'+e.id+'" data-weather-city="'+e.city+'">'+e.city+' <span class="search-tool__meta">'+e.country+"</span></a>",n.appendChild(a)}),this.clear().append(n)}},{key:"clear",value:function(){return this.$list.html("")}},{key:"destroy",value:function(){this.clear()}}],[{key:"nearestLinkNode",value:function(e){return(0,h.default)(e).hasClass("js-search-tool-link")?e:h.default.ancestor(e,"js-search-tool-link")}}]),e}()}.apply(t,a))&&(e.exports=o)},693:function(e,t,n){var a,o;a=[n(94),n(9)],void 0!==(o=function(e,t){return function(n){return e(n,16,t(arguments,1))}}.apply(t,a))&&(e.exports=o)}});
//# sourceMappingURL=graun.facia.js.map